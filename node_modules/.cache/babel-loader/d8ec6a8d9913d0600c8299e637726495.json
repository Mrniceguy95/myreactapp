{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\guido\\\\Documents\\\\GitHub\\\\myreactapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\guido\\\\Documents\\\\GitHub\\\\myreactapp\\\\src\\\\components\\\\appComponent\\\\sharingApp.js\";\nimport React, { Component } from 'react';\nimport Posts from '../postsComponent/posts';\nimport AppForm from '../formComponents/appFormComponent';\nimport axios from 'axios';\nimport List from 'list.js';\nimport Popup from \"reactjs-popup\";\nimport $ from 'jquery'; //components\n\nclass SharingApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      drivers: [],\n      lifters: [],\n      spinning: false,\n      driversActive: true,\n      liftersActive: false\n    };\n    this.Refetch = this.Refetch.bind(this);\n    this.handleDriversTab = this.handleDriversTab.bind(this);\n    this.handleLiftersTab = this.handleLiftersTab.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(`https://acolame-d1d98.firebaseio.com/conductores.json`).then(res => {\n      const drivers = res.data;\n      this.setState({\n        drivers\n      });\n    });\n    axios.get(`https://acolame-d1d98.firebaseio.com/pasajeros.json`).then(res => {\n      const lifters = res.data;\n      this.setState({\n        lifters\n      });\n    });\n  }\n\n  Refetch() {\n    axios.get(`https://acolame-d1d98.firebaseio.com/conductores.json`).then(res => {\n      const drivers = res.data;\n      this.setState({\n        drivers\n      });\n    });\n    axios.get(`https://acolame-d1d98.firebaseio.com/pasajeros.json`).then(res => {\n      const lifters = res.data;\n      this.setState({\n        lifters\n      });\n      setTimeout(() => {\n        this.handleSpin();\n      }, 1800);\n    });\n  }\n\n  handleSpin() {\n    this.setState({\n      spinning: !this.state.spinning\n    });\n  }\n\n  componentDidUpdate() {\n    var max = 0;\n    var className = document.querySelectorAll('.date-month');\n\n    function monthDate(param) {\n      let dateValue = Date.parse(param) / 1000;\n      return -(dateValue - max);\n    }\n\n    for (let i = 0; i < className.length; i++) {\n      var attributeaux = document.querySelectorAll('.date-month')[i].innerText;\n      attributeaux = attributeaux.substring(3, 5) + \"-\" + attributeaux.substring(0, 2) + \"-\" + attributeaux.substring(6, 10);\n      let dateValueaux = Date.parse(attributeaux) / 1000;\n      if (dateValueaux > max) max = dateValueaux;\n    }\n\n    for (let i = 0; i < className.length; i++) {\n      var attribute = document.querySelectorAll('.date-month')[i].innerText;\n      attribute = attribute.substring(3, 5) + \"-\" + attribute.substring(0, 2) + \"-\" + attribute.substring(6, 10);\n      document.querySelectorAll('.date-month')[i].setAttribute('data-timestamp', monthDate(attribute));\n    }\n\n    var options = {\n      valueNames: ['origin', 'destination', 'pname']\n    };\n    var options2 = {\n      valueNames: [{\n        name: 'date-month',\n        attr: 'data-timestamp'\n      }]\n    };\n    var posts = new List('users', options);\n    var posts2 = new List('users', options2);\n    var posts3 = new List('users2', options);\n    var posts4 = new List('users2', options2);\n    $(\".filter\").keyup(function () {\n      posts.filter(item => {\n        return options.valueNames.every(name => {\n          var value = $(\"#\" + name).val().toLowerCase();\n          return item.values()[name].toLowerCase().includes(value);\n        });\n      });\n      posts3.filter(item => {\n        return options.valueNames.every(name => {\n          var value = $(\"#\" + name).val().toLowerCase();\n          return item.values()[name].toLowerCase().includes(value);\n        });\n      });\n    });\n  }\n\n  handleDriversTab() {\n    if (!this.state.driversActive) {\n      this.setState({\n        driversActive: true,\n        liftersActive: false\n      });\n      this.Refetch();\n    }\n  }\n\n  handleLiftersTab() {\n    if (!this.state.liftersActive) {\n      this.setState({\n        driversActive: false,\n        liftersActive: true\n      });\n      this.Refetch();\n    }\n  }\n\n  MyComponent() {\n    const _React$useState = React.useState({\n      height: window.innerHeight,\n      width: window.innerWidth\n    }),\n          _React$useState2 = _slicedToArray(_React$useState, 2),\n          dimensions = _React$useState2[0],\n          setDimensions = _React$useState2[1];\n\n    React.useEffect(() => {\n      const debouncedHandleResize = this.debounce(() => {\n        setDimensions({\n          height: window.innerHeight,\n          width: window.innerWidth\n        });\n      }, 1000);\n      window.addEventListener(\"resize\", debouncedHandleResize);\n      return _ => {\n        window.removeEventListener(\"resize\", debouncedHandleResize);\n      };\n    });\n\n    if (dimensions.width <= 1000) {\n      return React.createElement(Popup, {\n        open: true,\n        modal: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, open => React.createElement(\"div\", {\n        className: \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"close\",\n        onClick: this.props.update,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"\\xD7\"), React.createElement(\"div\", {\n        className: \"content center-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(AppForm, {\n        postreset: this.Refetch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })))));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(AppForm, {\n        postreset: this.Refetch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }));\n    }\n  }\n\n  debounce(fn, ms) {\n    let timer;\n    return _ => {\n      clearTimeout(timer);\n      timer = setTimeout(_ => {\n        timer = null;\n        fn.apply(this, arguments);\n      }, ms);\n    };\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"app-section\",\n      id: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"p1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Busca\"), \" tu viaje compartido.\"), React.createElement(\"form\", {\n      id: \"to-from\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"origin\",\n      className: \"filter\",\n      type: \"text\",\n      placeholder: \"Origen\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"destination\",\n      className: \"filter\",\n      type: \"text\",\n      placeholder: \"Destino\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"pname\",\n      className: \"filter\",\n      type: \"text\",\n      placeholder: \"Nombre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: this.state.spinning ? 'fa fa-refresh fa-spin' : 'fa fa-refresh',\n      \"aria-hidden\": \"true\",\n      onClick: () => {\n        this.Refetch();\n        this.handleSpin();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      className: \"p2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Busca\"), \" tu viaje compartido.\"), React.createElement(\"div\", {\n      className: \"separator2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"p1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"A\\xF1ade\"), \" el viaje que quieres compartir\"), () => {\n      const getForm = MyComponent();\n      getForm();\n    }, React.createElement(\"p\", {\n      className: \"p2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"A\\xF1ade\"), \" el viaje que quieres compartir\")), React.createElement(\"div\", {\n      className: \"app-posts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"p-lf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Estoy en busca de:\"), React.createElement(\"button\", {\n      className: this.state.driversActive ? \"tab tb-drivers active\" : \"tab tb-drivers\",\n      id: \"btnconductores\",\n      onClick: this.handleDriversTab,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Conductores\"), React.createElement(\"button\", {\n      className: this.state.liftersActive ? \"tab tb-passengers active\" : \"tab tb-passengers\",\n      id: \"btnpasajeros\",\n      onClick: this.handleLiftersTab,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Pasajeros\"), React.createElement(\"button\", {\n      id: \"sortbtn\",\n      className: \"tab tb-sortdate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-calendar\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fa fa-sort-desc\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"sbar-wrapper\",\n      \"data-simplebar\": true,\n      \"data-simplebar-auto-hide\": \"false\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(Posts, {\n      postactive: this.state.driversActive,\n      reset: this.Refetch,\n      drivers: this.state.drivers,\n      lifters: this.state.lifters,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default SharingApp;","map":{"version":3,"sources":["C:/Users/guido/Documents/GitHub/myreactapp/src/components/appComponent/sharingApp.js"],"names":["React","Component","Posts","AppForm","axios","List","Popup","$","SharingApp","constructor","props","state","drivers","lifters","spinning","driversActive","liftersActive","Refetch","bind","handleDriversTab","handleLiftersTab","componentDidMount","get","then","res","data","setState","setTimeout","handleSpin","componentDidUpdate","max","className","document","querySelectorAll","monthDate","param","dateValue","Date","parse","i","length","attributeaux","innerText","substring","dateValueaux","attribute","setAttribute","options","valueNames","options2","name","attr","posts","posts2","posts3","posts4","keyup","filter","item","every","value","val","toLowerCase","values","includes","MyComponent","useState","height","window","innerHeight","width","innerWidth","dimensions","setDimensions","useEffect","debouncedHandleResize","debounce","addEventListener","_","removeEventListener","open","update","fn","ms","timer","clearTimeout","apply","arguments","render","getForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Posts from '../postsComponent/posts';\nimport AppForm from '../formComponents/appFormComponent'\nimport axios from 'axios';\nimport List from 'list.js';\nimport Popup from \"reactjs-popup\";\nimport $ from 'jquery';\n\n\n//components\n\nclass SharingApp extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            drivers: [],\n            lifters: [],\n            spinning: false,\n            driversActive: true,\n            liftersActive: false\n        }\n        this.Refetch = this.Refetch.bind(this)\n        this.handleDriversTab = this.handleDriversTab.bind(this)\n        this.handleLiftersTab = this.handleLiftersTab.bind(this)\n    }\n\n    componentDidMount() {\n\n        axios.get(`https://acolame-d1d98.firebaseio.com/conductores.json`)\n            .then(res => {\n                const drivers = res.data;\n                this.setState({ drivers});\n            })\n\n        axios.get(`https://acolame-d1d98.firebaseio.com/pasajeros.json`)\n        .then(res => {\n            const lifters = res.data;  \n            this.setState({ lifters });\n        })\n    }\n\n    Refetch() {\n\n        axios.get(`https://acolame-d1d98.firebaseio.com/conductores.json`)\n            .then(res => {\n                const drivers = res.data;\n                this.setState({ drivers});\n            })\n\n        axios.get(`https://acolame-d1d98.firebaseio.com/pasajeros.json`)\n        .then(res => {\n            const lifters = res.data;  \n            this.setState({ lifters });\n            setTimeout(() => {this.handleSpin()}, 1800)\n            \n        })\n    }\n\n    handleSpin() {\n        this.setState({ spinning: !this.state.spinning })\n    }\n\n    componentDidUpdate() {\n        var max=0;\n        var className = document.querySelectorAll('.date-month');\n        function monthDate(param) {\n            let dateValue  = Date.parse(param)/1000;\n            return -(dateValue-max);\n        }\n\n        for(let i = 0; i < className.length; i++) {\n            var attributeaux = document.querySelectorAll('.date-month')[i].innerText;\n            attributeaux = attributeaux.substring(3, 5)+\"-\"+attributeaux.substring(0, 2)+\"-\"+attributeaux.substring(6, 10);\n            let dateValueaux  = Date.parse(attributeaux)/1000;\n            if(dateValueaux>max) max=dateValueaux;\n        }\n\n        for(let i = 0; i < className.length; i++) {\n            var attribute = document.querySelectorAll('.date-month')[i].innerText;\n            attribute = attribute.substring(3, 5)+\"-\"+attribute.substring(0, 2)+\"-\"+attribute.substring(6, 10);\n            document.querySelectorAll('.date-month')[i].setAttribute('data-timestamp', monthDate(attribute));\n        }\n\n        var options = {\n            valueNames: [ 'origin', 'destination', 'pname' ]\n        };\n        \n        var options2 = {\n            valueNames: [ { name: 'date-month', attr: 'data-timestamp' } ]\n        };\n\n        var posts = new List('users', options);\n        var posts2 = new List('users', options2);\n        var posts3 = new List('users2', options);\n        var posts4 = new List('users2', options2);\n\n        $(\".filter\").keyup(function(){\n            posts.filter(item => {\n            return options.valueNames.every(name => {\n                var value = $(\"#\"+name).val().toLowerCase();\n                return item.values()[name].toLowerCase().includes(value)\n            });\n            });\n            posts3.filter(item => {\n            return options.valueNames.every(name => {\n                var value = $(\"#\"+name).val().toLowerCase();\n                return item.values()[name].toLowerCase().includes(value)\n            });\n            });\n            \n            \n        });\n    }\n\n    handleDriversTab() {\n        if (!this.state.driversActive) {\n            this.setState({\n                driversActive: true,\n                liftersActive: false\n            })\n            this.Refetch();\n        }\n    }\n\n    handleLiftersTab() {\n        if (!this.state.liftersActive) {\n            this.setState({\n                driversActive: false,\n                liftersActive: true\n            })\n            this.Refetch();\n        }\n    }\n\n    MyComponent() {\n        const [dimensions, setDimensions] = React.useState({\n          height: window.innerHeight,\n          width: window.innerWidth\n        });\n        React.useEffect(() => {\n          const debouncedHandleResize = this.debounce(() => {\n            setDimensions({\n              height: window.innerHeight,\n              width: window.innerWidth\n            });\n          }, 1000);\n      \n          window.addEventListener(\"resize\", debouncedHandleResize);\n      \n          return _ => {\n            window.removeEventListener(\"resize\", debouncedHandleResize);\n          };\n        });\n        if (dimensions.width <= 1000) {\n        return (\n            <Popup open={true} \n                modal>\n                {open => (\n                    <div className=\"modal\">\n                        <a className=\"close\" \n                            onClick={this.props.update}\n                        >\n                        &times;\n                        </a>\n                        <div className=\"content center-content\">\n                        <div className=\"form\">\n                        \n                            <AppForm postreset={this.Refetch} />\n                        </div>\n                        </div>\n                    </div>\n                )}\n            </Popup>\n            );\n        } else {\n            return (\n                <div className=\"form\">        \n                    <AppForm postreset={this.Refetch} />\n                </div>\n            )\n        }\n      }\n      \n    debounce(fn, ms) {\n        let timer;\n        return _ => {\n          clearTimeout(timer);\n          timer = setTimeout(_ => {\n            timer = null;\n            fn.apply(this, arguments);\n          }, ms);\n        };\n      }\n\n    render () {\n        return (\n            <section className=\"app-section\" id=\"app\">\n                <div className=\"app-container\">\n                    <div className=\"app-search\">\n                            <p className=\"p1\"><strong>Busca</strong> tu viaje compartido.</p>\n                            <form id=\"to-from\" autoComplete=\"off\">\n                                    <input id=\"origin\" className=\"filter\" type=\"text\" placeholder=\"Origen\" />\n                                    <input id=\"destination\"  className=\"filter\" type=\"text\" placeholder=\"Destino\" />\n                                    <input id=\"pname\"  className=\"filter\" type=\"text\" placeholder=\"Nombre\" />\n                                    \n                                    <i className={this.state.spinning ? 'fa fa-refresh fa-spin' : 'fa fa-refresh'} aria-hidden=\"true\" \n                                        onClick={() => {this.Refetch(); this.handleSpin();}}\n                                    ></i>\n                            </form>\n                            <p className=\"p2\"><strong>Busca</strong> tu viaje compartido.</p>\n                            <div className=\"separator2\"></div>\n                            \n                            <p className=\"p1\"><strong>Añade</strong> el viaje que quieres compartir</p>\n                            {() => \n                                {const getForm = MyComponent();\n                                getForm();}\n                            }\n                            <p className=\"p2\"><strong>Añade</strong> el viaje que quieres compartir</p>\n\n                    </div>\n                    \n                    <div className=\"app-posts\">\n                        <p className=\"p-lf\">Estoy en busca de:</p>\n                        <button className={this.state.driversActive ? \"tab tb-drivers active\" : \"tab tb-drivers\"} id=\"btnconductores\" onClick={this.handleDriversTab}>Conductores</button>\n                        <button className={this.state.liftersActive ? \"tab tb-passengers active\" : \"tab tb-passengers\"} id=\"btnpasajeros\" onClick={this.handleLiftersTab}>Pasajeros</button>\n                        <button id=\"sortbtn\" className=\"tab tb-sortdate\"><i className=\"fa fa-calendar\" aria-hidden=\"true\"></i><i className=\"fa fa-sort-desc\" aria-hidden=\"true\"></i></button>\n                        <div className=\"sbar-wrapper\" data-simplebar data-simplebar-auto-hide=\"false\">\n\n                            <Posts postactive={this.state.driversActive} reset={this.Refetch} drivers={this.state.drivers} lifters={this.state.lifters} />\n\n                        </div>\n                    </div>\n\n                </div>\n            </section>\n        );\n    }\n}\n\nexport default SharingApp;\n\n"]},"metadata":{},"sourceType":"module"}