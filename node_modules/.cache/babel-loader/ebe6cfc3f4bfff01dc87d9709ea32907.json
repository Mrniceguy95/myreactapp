{"ast":null,"code":"var COMPILED_ORDER,\n    DEPENDENCIES,\n    DEPENDENCIES_VARS,\n    dataCache,\n    fnPlaceholder,\n    fnPlaceholderRe,\n    regexpPlaceholder,\n    regexpPlaceholderRe,\n    template,\n    undefinedPlaceholder,\n    undefinedPlaceholderRe,\n    extend = require(\"util\")._extend,\n    fs = require(\"fs\");\n\nCOMPILED_ORDER = [// No dependencies.\n\"numberFormatter\", \"numberParser\", \"pluralGenerator\", // Depends on plural.\n\"messageFormatter\", // Depends on number and/or plural.\n\"currencyFormatter\", \"dateToPartsFormatter\", \"dateFormatter\", \"dateParser\", \"relativeTimeFormatter\", \"unitFormatter\"];\nDEPENDENCIES = {\n  currencyFormatter: {\n    currency: true,\n    number: true\n  },\n  dateFormatter: {\n    date: true\n  },\n  dateToPartsFormatter: {\n    date: true\n  },\n  dateParser: {\n    date: true\n  },\n  messageFormatter: {\n    message: true\n  },\n  numberFormatter: {\n    number: true\n  },\n  numberParser: {\n    number: true\n  },\n  pluralGenerator: {\n    plural: true\n  },\n  relativeTimeFormatter: {\n    number: true,\n    plural: true,\n    \"relative-time\": true\n  },\n  unitFormatter: {\n    number: true,\n    plural: true,\n    unit: true\n  }\n};\nDEPENDENCIES_VARS = {\n  currencyFormatter: {\n    currencyFormatterFn: true,\n    currencyNameFormat: true,\n    validateParameterPresence: true,\n    validateParameterTypeNumber: true\n  },\n  dateFormatter: {\n    dateFormatterFn: true,\n    dateFormat: true,\n    validateParameterPresence: true,\n    validateParameterTypeDate: true\n  },\n  dateToPartsFormatter: {\n    dateToPartsFormatterFn: true,\n    dateToPartsFormat: true,\n    validateParameterPresence: true,\n    validateParameterTypeDate: true\n  },\n  dateParser: {\n    dateParserFn: true,\n    dateParse: true,\n    dateTokenizer: true,\n    validateParameterPresence: true,\n    validateParameterTypeString: true\n  },\n  messageFormatter: {\n    messageFormatterFn: true,\n    messageFormat: true,\n    validateParameterTypeMessageVariables: true\n  },\n  numberFormatter: {\n    numberFormatterFn: true,\n    numberFormat: true,\n    numberRound: true,\n    validateParameterPresence: true,\n    validateParameterTypeNumber: true\n  },\n  numberParser: {\n    numberParserFn: true,\n    numberParse: true,\n    validateParameterPresence: true,\n    validateParameterTypeString: true\n  },\n  pluralGenerator: {\n    pluralGeneratorFn: true,\n    validateParameterPresence: true,\n    validateParameterTypeNumber: true\n  },\n  relativeTimeFormatter: {\n    relativeTimeFormatterFn: true,\n    validateParameterPresence: true,\n    validateParameterTypeNumber: true\n  },\n  unitFormatter: {\n    unitFormatterFn: true,\n    validateParameterPresence: true,\n    validateParameterTypeNumber: true\n  }\n};\ndataCache = {};\ntemplate = fs.readFileSync(__dirname + \"/compile.template\").toString(\"utf-8\");\n\nfunction functionName(fn) {\n  return /^function\\s+([\\w\\$]+)\\s*\\(/.exec(fn.toString())[1];\n}\n\nfnPlaceholder = \"fnPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\", fnPlaceholderRe = new RegExp(\"\\\"\" + fnPlaceholder + \"\\\"\", \"g\"), regexpPlaceholder = \"regexpPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\", regexpPlaceholderRe = new RegExp(\"\\\"\" + regexpPlaceholder + \"\\\"\", \"g\"), undefinedPlaceholder = \"undefinedPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\", undefinedPlaceholderRe = new RegExp(\"\\\"\" + undefinedPlaceholder + \"\\\"\", \"g\");\n\nfunction stringifyIncludingFunctionsAndRegExpsAndUndefined(object) {\n  var json,\n      fns = [],\n      regexps = [];\n  json = JSON.stringify(object, function (key, value) {\n    if (typeof value === \"function\") {\n      fns.push(value);\n      return fnPlaceholder;\n    } else if (value instanceof RegExp) {\n      regexps.push(value);\n      return regexpPlaceholder;\n    } else if (value === undefined) {\n      return undefinedPlaceholder;\n    }\n\n    return value;\n  });\n  return json.replace(fnPlaceholderRe, function () {\n    var fn = fns.shift();\n\n    if (\"generatorString\" in fn) {\n      return fn.generatorString();\n    } else if (\"dataCacheKey\" in fn) {\n      dataCache[fn.dataCacheKey] = fn();\n      return \"getCache(\\\"\" + fn.dataCacheKey + \"\\\")\";\n    } else {\n      return fn.toString();\n    }\n  }).replace(regexpPlaceholderRe, function () {\n    return regexps.shift().toString();\n  }).replace(undefinedPlaceholderRe, \"\");\n}\n\nfunction compile(formatterOrParser) {\n  var fnName = /^function\\s+([\\w\\$]+)\\s*\\(/.exec(formatterOrParser.toString())[1],\n      runtimeKey = formatterOrParser.runtimeKey,\n      runtimeArgs = formatterOrParser.runtimeArgs;\n  runtimeArgs = runtimeArgs.map(stringifyIncludingFunctionsAndRegExpsAndUndefined).join(\", \");\n  return \"Globalize.\" + runtimeKey + \" = \" + fnName + \"Fn(\" + runtimeArgs + \");\";\n}\n\nfunction deduceDependenciesVars(formatterOrParser) {\n  return DEPENDENCIES_VARS[functionName(formatterOrParser)];\n}\n/**\n * Default template function\n * properties:\n *  - compiled\n *  - dependencies\n */\n\n\nfunction defaultTemplate(properties) {\n  var params = {};\n  params.compiled = properties.code;\n  params.dependenciesAmd = JSON.stringify(properties.dependencies);\n  params.dependenciesCjs = properties.dependencies.map(function (dependency) {\n    return \"require(\\\"globalize/dist/\" + dependency + \"\\\")\";\n  }).join(\", \");\n  return template.replace(/{{[a-zA-Z]+}}/g, function (name) {\n    name = name.slice(2, -2);\n    return params[name];\n  });\n}\n/**\n * Returns a string with the compiled formatters and parsers.\n *\n * @param {formattersAndParsers} object or array\n * @param {options} object\n */\n\n\nfunction compiler(formattersAndParsers, options) {\n  var code,\n      dependencies,\n      dependenciesVars,\n      templateFn,\n      dataCacheCode = \"\",\n      extractedFormattersAndParsers = [],\n      formattersAndParsersKeys = [];\n  options = options || {};\n  templateFn = options.template || defaultTemplate; // Extract Formatters and Parsers from arguments (and its nested formatters and parsers).\n\n  function extractFormattersAndParsers(object) {\n    JSON.stringify(object, function (key, value) {\n      // If a node is a formatter or a parser function, push it to our Array.\n      if (typeof value === \"function\" && \"runtimeArgs\" in value) {\n        extractedFormattersAndParsers.push(value); // ... and do the same for its runtimeArgs (extract nested formatters or parsers).\n\n        extractFormattersAndParsers(value.runtimeArgs);\n      }\n\n      return value;\n    });\n  }\n\n  function uniqueFormattersAndParsers(formatterOrParser) {\n    var filter = formattersAndParsersKeys.indexOf(formatterOrParser.runtimeKey) === -1;\n    formattersAndParsersKeys.push(formatterOrParser.runtimeKey);\n    return filter;\n  }\n\n  extractFormattersAndParsers(formattersAndParsers);\n  extractedFormattersAndParsers = extractedFormattersAndParsers.filter(uniqueFormattersAndParsers);\n\n  if (!extractedFormattersAndParsers.length) {\n    throw new Error(\"No formatters or parsers has been provided\");\n  } // Generate the compiled functions.\n\n\n  code = extractedFormattersAndParsers.sort(function (a, b) {\n    a = functionName(a);\n    b = functionName(b);\n    return COMPILED_ORDER.indexOf(a) - COMPILED_ORDER.indexOf(b);\n  }).map(compile).join(\"\\n\"); // Generate the optional dataCache.\n\n  if (Object.keys(dataCache).length) {\n    dataCacheCode = \"var dataCache = \" + JSON.stringify(dataCache) + \";\\n\" + \"function getCache(key) {\\n\" + \"\treturn function() {\\n\" + \"\t\treturn dataCache[key];\\n\" + \"\t};\\n\" + \"}\\n\";\n  } // Generate dependency assignments and requirements.\n\n\n  dependencies = Object.keys(extractedFormattersAndParsers.map(functionName).reduce(function (sum, i) {\n    return extend(sum, DEPENDENCIES[i]);\n  }, {}));\n  dependencies = dependencies.map(function (dependency) {\n    return \"globalize-runtime/\" + dependency;\n  });\n  dependenciesVars = extractedFormattersAndParsers.map(deduceDependenciesVars).reduce(function (sum, i) {\n    return extend(sum, i);\n  }, {});\n  dependenciesVars = Object.keys(dependenciesVars).map(function (dependency) {\n    return \"var \" + dependency + \" = Globalize._\" + dependency + \";\";\n  }).join(\"\\n\");\n  code = dependenciesVars + \"\\n\\n\" + dataCacheCode + code;\n  /*\n  // Generate exports.\n  if ( args.length === 1 ) {\n  \tproperties.exports = args[ 0 ];\n  } else {\n  \tproperties.exports = args;\n  }\n  properties.exports = \"return \" + stringifyIncludingFunctionsAndUndefined( properties.exports );\n  */\n\n  return templateFn({\n    code: code,\n    dependencies: dependencies\n  });\n}\n\nmodule.exports = compiler;","map":{"version":3,"sources":["C:/Users/guido/Documents/GitHub/myreactapp/node_modules/globalize-compiler/lib/compile.js"],"names":["COMPILED_ORDER","DEPENDENCIES","DEPENDENCIES_VARS","dataCache","fnPlaceholder","fnPlaceholderRe","regexpPlaceholder","regexpPlaceholderRe","template","undefinedPlaceholder","undefinedPlaceholderRe","extend","require","_extend","fs","currencyFormatter","currency","number","dateFormatter","date","dateToPartsFormatter","dateParser","messageFormatter","message","numberFormatter","numberParser","pluralGenerator","plural","relativeTimeFormatter","unitFormatter","unit","currencyFormatterFn","currencyNameFormat","validateParameterPresence","validateParameterTypeNumber","dateFormatterFn","dateFormat","validateParameterTypeDate","dateToPartsFormatterFn","dateToPartsFormat","dateParserFn","dateParse","dateTokenizer","validateParameterTypeString","messageFormatterFn","messageFormat","validateParameterTypeMessageVariables","numberFormatterFn","numberFormat","numberRound","numberParserFn","numberParse","pluralGeneratorFn","relativeTimeFormatterFn","unitFormatterFn","readFileSync","__dirname","toString","functionName","fn","exec","RegExp","stringifyIncludingFunctionsAndRegExpsAndUndefined","object","json","fns","regexps","JSON","stringify","key","value","push","undefined","replace","shift","generatorString","dataCacheKey","compile","formatterOrParser","fnName","runtimeKey","runtimeArgs","map","join","deduceDependenciesVars","defaultTemplate","properties","params","compiled","code","dependenciesAmd","dependencies","dependenciesCjs","dependency","name","slice","compiler","formattersAndParsers","options","dependenciesVars","templateFn","dataCacheCode","extractedFormattersAndParsers","formattersAndParsersKeys","extractFormattersAndParsers","uniqueFormattersAndParsers","filter","indexOf","length","Error","sort","a","b","Object","keys","reduce","sum","i","module","exports"],"mappings":"AAAA,IAAIA,cAAJ;AAAA,IAAoBC,YAApB;AAAA,IAAkCC,iBAAlC;AAAA,IAAqDC,SAArD;AAAA,IAAgEC,aAAhE;AAAA,IAA+EC,eAA/E;AAAA,IACCC,iBADD;AAAA,IACoBC,mBADpB;AAAA,IACyCC,QADzC;AAAA,IACmDC,oBADnD;AAAA,IACyEC,sBADzE;AAAA,IAECC,MAAM,GAAGC,OAAO,CAAE,MAAF,CAAP,CAAkBC,OAF5B;AAAA,IAGCC,EAAE,GAAGF,OAAO,CAAE,IAAF,CAHb;;AAKAZ,cAAc,GAAG,CAEhB;AACA,iBAHgB,EAIhB,cAJgB,EAKhB,iBALgB,EAOhB;AACA,kBARgB,EAUhB;AACA,mBAXgB,EAYhB,sBAZgB,EAahB,eAbgB,EAchB,YAdgB,EAehB,uBAfgB,EAgBhB,eAhBgB,CAAjB;AAmBAC,YAAY,GAAG;AACdc,EAAAA,iBAAiB,EAAE;AAAEC,IAAAA,QAAQ,EAAE,IAAZ;AAAkBC,IAAAA,MAAM,EAAE;AAA1B,GADL;AAEdC,EAAAA,aAAa,EAAE;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAFD;AAGdC,EAAAA,oBAAoB,EAAE;AAAED,IAAAA,IAAI,EAAE;AAAR,GAHR;AAIdE,EAAAA,UAAU,EAAE;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAJE;AAKdG,EAAAA,gBAAgB,EAAE;AAAEC,IAAAA,OAAO,EAAE;AAAX,GALJ;AAMdC,EAAAA,eAAe,EAAE;AAAEP,IAAAA,MAAM,EAAE;AAAV,GANH;AAOdQ,EAAAA,YAAY,EAAE;AAAER,IAAAA,MAAM,EAAE;AAAV,GAPA;AAQdS,EAAAA,eAAe,EAAE;AAAEC,IAAAA,MAAM,EAAE;AAAV,GARH;AASdC,EAAAA,qBAAqB,EAAE;AAAEX,IAAAA,MAAM,EAAE,IAAV;AAAgBU,IAAAA,MAAM,EAAE,IAAxB;AAA8B,qBAAiB;AAA/C,GATT;AAUdE,EAAAA,aAAa,EAAE;AAAEZ,IAAAA,MAAM,EAAE,IAAV;AAAgBU,IAAAA,MAAM,EAAE,IAAxB;AAA8BG,IAAAA,IAAI,EAAE;AAApC;AAVD,CAAf;AAaA5B,iBAAiB,GAAG;AACnBa,EAAAA,iBAAiB,EAAE;AAClBgB,IAAAA,mBAAmB,EAAE,IADH;AAElBC,IAAAA,kBAAkB,EAAE,IAFF;AAGlBC,IAAAA,yBAAyB,EAAE,IAHT;AAIlBC,IAAAA,2BAA2B,EAAE;AAJX,GADA;AAOnBhB,EAAAA,aAAa,EAAE;AACdiB,IAAAA,eAAe,EAAE,IADH;AAEdC,IAAAA,UAAU,EAAE,IAFE;AAGdH,IAAAA,yBAAyB,EAAE,IAHb;AAIdI,IAAAA,yBAAyB,EAAE;AAJb,GAPI;AAanBjB,EAAAA,oBAAoB,EAAE;AACrBkB,IAAAA,sBAAsB,EAAE,IADH;AAErBC,IAAAA,iBAAiB,EAAE,IAFE;AAGrBN,IAAAA,yBAAyB,EAAE,IAHN;AAIrBI,IAAAA,yBAAyB,EAAE;AAJN,GAbH;AAmBnBhB,EAAAA,UAAU,EAAE;AACXmB,IAAAA,YAAY,EAAE,IADH;AAEXC,IAAAA,SAAS,EAAE,IAFA;AAGXC,IAAAA,aAAa,EAAE,IAHJ;AAIXT,IAAAA,yBAAyB,EAAE,IAJhB;AAKXU,IAAAA,2BAA2B,EAAE;AALlB,GAnBO;AA0BnBrB,EAAAA,gBAAgB,EAAE;AACjBsB,IAAAA,kBAAkB,EAAE,IADH;AAEjBC,IAAAA,aAAa,EAAE,IAFE;AAGjBC,IAAAA,qCAAqC,EAAE;AAHtB,GA1BC;AA+BnBtB,EAAAA,eAAe,EAAE;AAChBuB,IAAAA,iBAAiB,EAAE,IADH;AAEhBC,IAAAA,YAAY,EAAE,IAFE;AAGhBC,IAAAA,WAAW,EAAE,IAHG;AAIhBhB,IAAAA,yBAAyB,EAAE,IAJX;AAKhBC,IAAAA,2BAA2B,EAAE;AALb,GA/BE;AAsCnBT,EAAAA,YAAY,EAAE;AACbyB,IAAAA,cAAc,EAAE,IADH;AAEbC,IAAAA,WAAW,EAAE,IAFA;AAGblB,IAAAA,yBAAyB,EAAE,IAHd;AAIbU,IAAAA,2BAA2B,EAAE;AAJhB,GAtCK;AA4CnBjB,EAAAA,eAAe,EAAE;AAChB0B,IAAAA,iBAAiB,EAAE,IADH;AAEhBnB,IAAAA,yBAAyB,EAAE,IAFX;AAGhBC,IAAAA,2BAA2B,EAAE;AAHb,GA5CE;AAiDnBN,EAAAA,qBAAqB,EAAE;AACtByB,IAAAA,uBAAuB,EAAE,IADH;AAEtBpB,IAAAA,yBAAyB,EAAE,IAFL;AAGtBC,IAAAA,2BAA2B,EAAE;AAHP,GAjDJ;AAsDnBL,EAAAA,aAAa,EAAE;AACdyB,IAAAA,eAAe,EAAE,IADH;AAEdrB,IAAAA,yBAAyB,EAAE,IAFb;AAGdC,IAAAA,2BAA2B,EAAE;AAHf;AAtDI,CAApB;AA6DA/B,SAAS,GAAG,EAAZ;AAEAK,QAAQ,GAAGM,EAAE,CAACyC,YAAH,CAAiBC,SAAS,GAAG,mBAA7B,EAAmDC,QAAnD,CAA6D,OAA7D,CAAX;;AAEA,SAASC,YAAT,CAAuBC,EAAvB,EAA4B;AAC3B,SAAO,6BAA6BC,IAA7B,CAAmCD,EAAE,CAACF,QAAH,EAAnC,EAAoD,CAApD,CAAP;AACA;;AAEDrD,aAAa,GAAG,uDAAhB,EACAC,eAAe,GAAG,IAAIwD,MAAJ,CAAY,OAAOzD,aAAP,GAAuB,IAAnC,EAAyC,GAAzC,CADlB,EAEAE,iBAAiB,GAAG,2DAFpB,EAGAC,mBAAmB,GAAG,IAAIsD,MAAJ,CAAY,OAAOvD,iBAAP,GAA2B,IAAvC,EAA6C,GAA7C,CAHtB,EAIAG,oBAAoB,GAAG,8DAJvB,EAKAC,sBAAsB,GAAG,IAAImD,MAAJ,CAAY,OAAOpD,oBAAP,GAA8B,IAA1C,EAAgD,GAAhD,CALzB;;AAOA,SAASqD,iDAAT,CAA4DC,MAA5D,EAAqE;AACpE,MAAIC,IAAJ;AAAA,MACCC,GAAG,GAAG,EADP;AAAA,MAECC,OAAO,GAAG,EAFX;AAGAF,EAAAA,IAAI,GAAGG,IAAI,CAACC,SAAL,CAAgBL,MAAhB,EAAwB,UAAUM,GAAV,EAAeC,KAAf,EAAuB;AACrD,QAAK,OAAOA,KAAP,KAAiB,UAAtB,EAAmC;AAClCL,MAAAA,GAAG,CAACM,IAAJ,CAAUD,KAAV;AACA,aAAOlE,aAAP;AACA,KAHD,MAGO,IAAKkE,KAAK,YAAYT,MAAtB,EAA+B;AACrCK,MAAAA,OAAO,CAACK,IAAR,CAAcD,KAAd;AACA,aAAOhE,iBAAP;AACA,KAHM,MAGA,IAAKgE,KAAK,KAAKE,SAAf,EAA2B;AACjC,aAAO/D,oBAAP;AACA;;AACD,WAAO6D,KAAP;AACA,GAXM,CAAP;AAYA,SAAON,IAAI,CAACS,OAAL,CAAcpE,eAAd,EAA+B,YAAW;AAChD,QAAIsD,EAAE,GAAGM,GAAG,CAACS,KAAJ,EAAT;;AACA,QAAK,qBAAqBf,EAA1B,EAA+B;AAC9B,aAAOA,EAAE,CAACgB,eAAH,EAAP;AACA,KAFD,MAEO,IAAK,kBAAkBhB,EAAvB,EAA4B;AAClCxD,MAAAA,SAAS,CAAEwD,EAAE,CAACiB,YAAL,CAAT,GAA+BjB,EAAE,EAAjC;AACA,aAAO,gBAAgBA,EAAE,CAACiB,YAAnB,GAAkC,KAAzC;AACA,KAHM,MAGA;AACN,aAAOjB,EAAE,CAACF,QAAH,EAAP;AACA;AACD,GAVM,EAUJgB,OAVI,CAUKlE,mBAVL,EAU0B,YAAW;AAC3C,WAAO2D,OAAO,CAACQ,KAAR,GAAgBjB,QAAhB,EAAP;AACA,GAZM,EAYJgB,OAZI,CAYK/D,sBAZL,EAY6B,EAZ7B,CAAP;AAaA;;AAED,SAASmE,OAAT,CAAkBC,iBAAlB,EAAsC;AACrC,MAAIC,MAAM,GAAG,6BAA6BnB,IAA7B,CAAmCkB,iBAAiB,CAACrB,QAAlB,EAAnC,EAAmE,CAAnE,CAAb;AAAA,MACCuB,UAAU,GAAGF,iBAAiB,CAACE,UADhC;AAAA,MAECC,WAAW,GAAGH,iBAAiB,CAACG,WAFjC;AAIAA,EAAAA,WAAW,GAAGA,WAAW,CAACC,GAAZ,CAAiBpB,iDAAjB,EAAqEqB,IAArE,CAA2E,IAA3E,CAAd;AAEA,SAAO,eAAeH,UAAf,GAA4B,KAA5B,GAAoCD,MAApC,GAA6C,KAA7C,GACNE,WADM,GACQ,IADf;AAEA;;AAED,SAASG,sBAAT,CAAiCN,iBAAjC,EAAqD;AACpD,SAAO5E,iBAAiB,CAAEwD,YAAY,CAAEoB,iBAAF,CAAd,CAAxB;AACA;AAED;;;;;;;;AAMA,SAASO,eAAT,CAA0BC,UAA1B,EAAuC;AACtC,MAAIC,MAAM,GAAG,EAAb;AAEAA,EAAAA,MAAM,CAACC,QAAP,GAAkBF,UAAU,CAACG,IAA7B;AACAF,EAAAA,MAAM,CAACG,eAAP,GAAyBvB,IAAI,CAACC,SAAL,CAAgBkB,UAAU,CAACK,YAA3B,CAAzB;AACAJ,EAAAA,MAAM,CAACK,eAAP,GAAyBN,UAAU,CAACK,YAAX,CAAwBT,GAAxB,CAA4B,UAAUW,UAAV,EAAuB;AAC3E,WAAO,8BAA8BA,UAA9B,GAA2C,KAAlD;AACA,GAFwB,EAEtBV,IAFsB,CAEhB,IAFgB,CAAzB;AAIA,SAAO3E,QAAQ,CAACiE,OAAT,CAAkB,gBAAlB,EAAoC,UAAUqB,IAAV,EAAiB;AAC3DA,IAAAA,IAAI,GAAGA,IAAI,CAACC,KAAL,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAP;AACA,WAAOR,MAAM,CAAEO,IAAF,CAAb;AACA,GAHM,CAAP;AAIA;AAED;;;;;;;;AAMA,SAASE,QAAT,CAAmBC,oBAAnB,EAAyCC,OAAzC,EAAmD;AAClD,MAAIT,IAAJ;AAAA,MAAUE,YAAV;AAAA,MAAwBQ,gBAAxB;AAAA,MAA0CC,UAA1C;AAAA,MACCC,aAAa,GAAG,EADjB;AAAA,MAECC,6BAA6B,GAAG,EAFjC;AAAA,MAGCC,wBAAwB,GAAG,EAH5B;AAKAL,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAE,EAAAA,UAAU,GAAGF,OAAO,CAAC1F,QAAR,IAAoB6E,eAAjC,CAPkD,CASlD;;AACA,WAASmB,2BAAT,CAAsCzC,MAAtC,EAA+C;AAC9CI,IAAAA,IAAI,CAACC,SAAL,CAAgBL,MAAhB,EAAwB,UAAUM,GAAV,EAAeC,KAAf,EAAuB;AAE9C;AACA,UAAK,OAAOA,KAAP,KAAiB,UAAjB,IAA+B,iBAAiBA,KAArD,EAA6D;AAC5DgC,QAAAA,6BAA6B,CAAC/B,IAA9B,CAAoCD,KAApC,EAD4D,CAG5D;;AACAkC,QAAAA,2BAA2B,CAAElC,KAAK,CAACW,WAAR,CAA3B;AACA;;AAED,aAAOX,KAAP;AACA,KAXD;AAYA;;AACD,WAASmC,0BAAT,CAAqC3B,iBAArC,EAAyD;AACxD,QAAI4B,MAAM,GAAGH,wBAAwB,CAACI,OAAzB,CAAkC7B,iBAAiB,CAACE,UAApD,MAAqE,CAAC,CAAnF;AACAuB,IAAAA,wBAAwB,CAAChC,IAAzB,CAA+BO,iBAAiB,CAACE,UAAjD;AACA,WAAO0B,MAAP;AACA;;AACDF,EAAAA,2BAA2B,CAAEP,oBAAF,CAA3B;AACAK,EAAAA,6BAA6B,GAAGA,6BAA6B,CAACI,MAA9B,CAAsCD,0BAAtC,CAAhC;;AAEA,MAAK,CAACH,6BAA6B,CAACM,MAApC,EAA6C;AAC5C,UAAM,IAAIC,KAAJ,CAAW,4CAAX,CAAN;AACA,GAlCiD,CAoClD;;;AACApB,EAAAA,IAAI,GAAGa,6BAA6B,CAACQ,IAA9B,CAAmC,UAAUC,CAAV,EAAaC,CAAb,EAAiB;AAC1DD,IAAAA,CAAC,GAAGrD,YAAY,CAAEqD,CAAF,CAAhB;AACAC,IAAAA,CAAC,GAAGtD,YAAY,CAAEsD,CAAF,CAAhB;AACA,WAAOhH,cAAc,CAAC2G,OAAf,CAAwBI,CAAxB,IAA8B/G,cAAc,CAAC2G,OAAf,CAAwBK,CAAxB,CAArC;AACA,GAJM,EAIJ9B,GAJI,CAICL,OAJD,EAIWM,IAJX,CAIiB,IAJjB,CAAP,CArCkD,CA2ClD;;AACA,MAAK8B,MAAM,CAACC,IAAP,CAAa/G,SAAb,EAAyByG,MAA9B,EAAuC;AACtCP,IAAAA,aAAa,GAAG,qBAAqBlC,IAAI,CAACC,SAAL,CAAgBjE,SAAhB,CAArB,GAAmD,KAAnD,GACf,4BADe,GAEf,wBAFe,GAGf,4BAHe,GAIf,OAJe,GAKf,KALD;AAMA,GAnDiD,CAqDlD;;;AACAwF,EAAAA,YAAY,GAAGsB,MAAM,CAACC,IAAP,CAAaZ,6BAA6B,CAACpB,GAA9B,CAAmCxB,YAAnC,EAAkDyD,MAAlD,CAAyD,UAAUC,GAAV,EAAeC,CAAf,EAAmB;AACvG,WAAO1G,MAAM,CAAEyG,GAAF,EAAOnH,YAAY,CAAEoH,CAAF,CAAnB,CAAb;AACA,GAF2B,EAEzB,EAFyB,CAAb,CAAf;AAIA1B,EAAAA,YAAY,GAAGA,YAAY,CAACT,GAAb,CAAiB,UAAUW,UAAV,EAAuB;AACtD,WAAO,uBAAuBA,UAA9B;AACA,GAFc,CAAf;AAGAM,EAAAA,gBAAgB,GAAGG,6BAA6B,CAC9CpB,GADiB,CACZE,sBADY,EAEjB+B,MAFiB,CAEV,UAAUC,GAAV,EAAeC,CAAf,EAAmB;AAC1B,WAAO1G,MAAM,CAAEyG,GAAF,EAAOC,CAAP,CAAb;AACA,GAJiB,EAIf,EAJe,CAAnB;AAKAlB,EAAAA,gBAAgB,GAAGc,MAAM,CAACC,IAAP,CAAaf,gBAAb,EACjBjB,GADiB,CACb,UAAUW,UAAV,EAAuB;AAC3B,WAAO,SAASA,UAAT,GAAsB,gBAAtB,GAAyCA,UAAzC,GAAsD,GAA7D;AACA,GAHiB,EAGfV,IAHe,CAGT,IAHS,CAAnB;AAKAM,EAAAA,IAAI,GAAGU,gBAAgB,GAAG,MAAnB,GAA4BE,aAA5B,GAA4CZ,IAAnD;AAEA;;;;;;;;;;AAUA,SAAOW,UAAU,CAAC;AACjBX,IAAAA,IAAI,EAAEA,IADW;AAEjBE,IAAAA,YAAY,EAAEA;AAFG,GAAD,CAAjB;AAIA;;AAED2B,MAAM,CAACC,OAAP,GAAiBvB,QAAjB","sourcesContent":["var COMPILED_ORDER, DEPENDENCIES, DEPENDENCIES_VARS, dataCache, fnPlaceholder, fnPlaceholderRe,\n\tregexpPlaceholder, regexpPlaceholderRe, template, undefinedPlaceholder, undefinedPlaceholderRe,\n\textend = require( \"util\" )._extend,\n\tfs = require( \"fs\" );\n\nCOMPILED_ORDER = [\n\n\t// No dependencies.\n\t\"numberFormatter\",\n\t\"numberParser\",\n\t\"pluralGenerator\",\n\n\t// Depends on plural.\n\t\"messageFormatter\",\n\n\t// Depends on number and/or plural.\n\t\"currencyFormatter\",\n\t\"dateToPartsFormatter\",\n\t\"dateFormatter\",\n\t\"dateParser\",\n\t\"relativeTimeFormatter\",\n\t\"unitFormatter\"\n];\n\nDEPENDENCIES = {\n\tcurrencyFormatter: { currency: true, number: true },\n\tdateFormatter: { date: true },\n\tdateToPartsFormatter: { date: true },\n\tdateParser: { date: true },\n\tmessageFormatter: { message: true },\n\tnumberFormatter: { number: true },\n\tnumberParser: { number: true },\n\tpluralGenerator: { plural: true },\n\trelativeTimeFormatter: { number: true, plural: true, \"relative-time\": true },\n\tunitFormatter: { number: true, plural: true, unit: true }\n};\n\nDEPENDENCIES_VARS = {\n\tcurrencyFormatter: {\n\t\tcurrencyFormatterFn: true,\n\t\tcurrencyNameFormat: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeNumber: true\n\t},\n\tdateFormatter: {\n\t\tdateFormatterFn: true,\n\t\tdateFormat: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeDate: true\n\t},\n\tdateToPartsFormatter: {\n\t\tdateToPartsFormatterFn: true,\n\t\tdateToPartsFormat: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeDate: true\n\t},\n\tdateParser: {\n\t\tdateParserFn: true,\n\t\tdateParse: true,\n\t\tdateTokenizer: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeString: true\n\t},\n\tmessageFormatter: {\n\t\tmessageFormatterFn: true,\n\t\tmessageFormat: true,\n\t\tvalidateParameterTypeMessageVariables: true\n\t},\n\tnumberFormatter: {\n\t\tnumberFormatterFn: true,\n\t\tnumberFormat: true,\n\t\tnumberRound: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeNumber: true\n\t},\n\tnumberParser: {\n\t\tnumberParserFn: true,\n\t\tnumberParse: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeString: true\n\t},\n\tpluralGenerator: {\n\t\tpluralGeneratorFn: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeNumber: true\n\t},\n\trelativeTimeFormatter: {\n\t\trelativeTimeFormatterFn: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeNumber: true\n\t},\n\tunitFormatter: {\n\t\tunitFormatterFn: true,\n\t\tvalidateParameterPresence: true,\n\t\tvalidateParameterTypeNumber: true\n\t}\n};\n\ndataCache = {};\n\ntemplate = fs.readFileSync( __dirname + \"/compile.template\" ).toString( \"utf-8\" );\n\nfunction functionName( fn ) {\n\treturn /^function\\s+([\\w\\$]+)\\s*\\(/.exec( fn.toString() )[ 1 ];\n}\n\nfnPlaceholder = \"fnPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\",\nfnPlaceholderRe = new RegExp( \"\\\"\" + fnPlaceholder + \"\\\"\", \"g\" ),\nregexpPlaceholder = \"regexpPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\",\nregexpPlaceholderRe = new RegExp( \"\\\"\" + regexpPlaceholder + \"\\\"\", \"g\" ),\nundefinedPlaceholder = \"undefinedPlaceholderBRVOhnVwmkNxKbCxydG9dZLhwf4puXOzkscBSgwk\",\nundefinedPlaceholderRe = new RegExp( \"\\\"\" + undefinedPlaceholder + \"\\\"\", \"g\" );\n\nfunction stringifyIncludingFunctionsAndRegExpsAndUndefined( object ) {\n\tvar json,\n\t\tfns = [],\n\t\tregexps = [];\n\tjson = JSON.stringify( object, function( key, value ) {\n\t\tif ( typeof value === \"function\" ) {\n\t\t\tfns.push( value );\n\t\t\treturn fnPlaceholder;\n\t\t} else if ( value instanceof RegExp ) {\n\t\t\tregexps.push( value );\n\t\t\treturn regexpPlaceholder;\n\t\t} else if ( value === undefined ) {\n\t\t\treturn undefinedPlaceholder;\n\t\t}\n\t\treturn value;\n\t});\n\treturn json.replace( fnPlaceholderRe, function() {\n\t\tvar fn = fns.shift();\n\t\tif ( \"generatorString\" in fn ) {\n\t\t\treturn fn.generatorString();\n\t\t} else if ( \"dataCacheKey\" in fn ) {\n\t\t\tdataCache[ fn.dataCacheKey ] = fn();\n\t\t\treturn \"getCache(\\\"\" + fn.dataCacheKey + \"\\\")\";\n\t\t} else {\n\t\t\treturn fn.toString();\n\t\t}\n\t}).replace( regexpPlaceholderRe, function() {\n\t\treturn regexps.shift().toString();\n\t}).replace( undefinedPlaceholderRe, \"\" );\n}\n\nfunction compile( formatterOrParser ) {\n\tvar fnName = /^function\\s+([\\w\\$]+)\\s*\\(/.exec( formatterOrParser.toString() )[ 1 ],\n\t\truntimeKey = formatterOrParser.runtimeKey,\n\t\truntimeArgs = formatterOrParser.runtimeArgs;\n\n\truntimeArgs = runtimeArgs.map( stringifyIncludingFunctionsAndRegExpsAndUndefined ).join( \", \" );\n\n\treturn \"Globalize.\" + runtimeKey + \" = \" + fnName + \"Fn(\" +\n\t\truntimeArgs + \");\";\n}\n\nfunction deduceDependenciesVars( formatterOrParser ) {\n\treturn DEPENDENCIES_VARS[ functionName( formatterOrParser ) ];\n}\n\n/**\n * Default template function\n * properties:\n *  - compiled\n *  - dependencies\n */\nfunction defaultTemplate( properties ) {\n\tvar params = {};\n\n\tparams.compiled = properties.code;\n\tparams.dependenciesAmd = JSON.stringify( properties.dependencies );\n\tparams.dependenciesCjs = properties.dependencies.map(function( dependency ) {\n\t\treturn \"require(\\\"globalize/dist/\" + dependency + \"\\\")\";\n\t}).join( \", \" );\n\n\treturn template.replace( /{{[a-zA-Z]+}}/g, function( name ) {\n\t\tname = name.slice( 2, -2 );\n\t\treturn params[ name ];\n\t});\n}\n\n/**\n * Returns a string with the compiled formatters and parsers.\n *\n * @param {formattersAndParsers} object or array\n * @param {options} object\n */\nfunction compiler( formattersAndParsers, options ) {\n\tvar code, dependencies, dependenciesVars, templateFn,\n\t\tdataCacheCode = \"\",\n\t\textractedFormattersAndParsers = [],\n\t\tformattersAndParsersKeys = [];\n\n\toptions = options || {};\n\ttemplateFn = options.template || defaultTemplate;\n\n\t// Extract Formatters and Parsers from arguments (and its nested formatters and parsers).\n\tfunction extractFormattersAndParsers( object ) {\n\t\tJSON.stringify( object, function( key, value ) {\n\n\t\t\t// If a node is a formatter or a parser function, push it to our Array.\n\t\t\tif ( typeof value === \"function\" && \"runtimeArgs\" in value ) {\n\t\t\t\textractedFormattersAndParsers.push( value );\n\n\t\t\t\t// ... and do the same for its runtimeArgs (extract nested formatters or parsers).\n\t\t\t\textractFormattersAndParsers( value.runtimeArgs );\n\t\t\t}\n\n\t\t\treturn value;\n\t\t});\n\t}\n\tfunction uniqueFormattersAndParsers( formatterOrParser ) {\n\t\tvar filter = formattersAndParsersKeys.indexOf( formatterOrParser.runtimeKey ) === -1;\n\t\tformattersAndParsersKeys.push( formatterOrParser.runtimeKey );\n\t\treturn filter;\n\t}\n\textractFormattersAndParsers( formattersAndParsers );\n\textractedFormattersAndParsers = extractedFormattersAndParsers.filter( uniqueFormattersAndParsers );\n\n\tif ( !extractedFormattersAndParsers.length ) {\n\t\tthrow new Error( \"No formatters or parsers has been provided\" );\n\t}\n\n\t// Generate the compiled functions.\n\tcode = extractedFormattersAndParsers.sort(function( a, b ) {\n\t\ta = functionName( a );\n\t\tb = functionName( b );\n\t\treturn COMPILED_ORDER.indexOf( a ) - COMPILED_ORDER.indexOf( b );\n\t}).map( compile ).join( \"\\n\" );\n\n\t// Generate the optional dataCache.\n\tif ( Object.keys( dataCache ).length ) {\n\t\tdataCacheCode = \"var dataCache = \" + JSON.stringify( dataCache ) + \";\\n\" +\n\t\t\t\"function getCache(key) {\\n\" +\n\t\t\t\"\treturn function() {\\n\" +\n\t\t\t\"\t\treturn dataCache[key];\\n\" +\n\t\t\t\"\t};\\n\" +\n\t\t\t\"}\\n\";\n\t}\n\n\t// Generate dependency assignments and requirements.\n\tdependencies = Object.keys( extractedFormattersAndParsers.map( functionName ).reduce(function( sum, i ) {\n\t\treturn extend( sum, DEPENDENCIES[ i ] );\n\t}, {}));\n\n\tdependencies = dependencies.map(function( dependency ) {\n\t\treturn \"globalize-runtime/\" + dependency;\n\t});\n\tdependenciesVars = extractedFormattersAndParsers\n\t\t.map( deduceDependenciesVars )\n\t\t.reduce(function( sum, i ) {\n\t\t\treturn extend( sum, i );\n\t\t}, {});\n\tdependenciesVars = Object.keys( dependenciesVars )\n\t\t.map(function( dependency ) {\n\t\t\treturn \"var \" + dependency + \" = Globalize._\" + dependency + \";\";\n\t\t}).join( \"\\n\" );\n\n\tcode = dependenciesVars + \"\\n\\n\" + dataCacheCode + code;\n\n\t/*\n\t// Generate exports.\n\tif ( args.length === 1 ) {\n\t\tproperties.exports = args[ 0 ];\n\t} else {\n\t\tproperties.exports = args;\n\t}\n\tproperties.exports = \"return \" + stringifyIncludingFunctionsAndUndefined( properties.exports );\n\t*/\n\n\treturn templateFn({\n\t\tcode: code,\n\t\tdependencies: dependencies\n\t});\n}\n\nmodule.exports = compiler;\n"]},"metadata":{},"sourceType":"script"}